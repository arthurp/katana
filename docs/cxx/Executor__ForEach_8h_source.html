<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Katana: Executor_ForEach.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Katana
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('Executor__ForEach_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Executor_ForEach.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Executor__ForEach_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * This file belongs to the Galois project, a C++ library for exploiting</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * parallelism. The code is being released under the terms of the 3-Clause BSD</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * License (a copy is located in LICENSE.txt at the top-level directory).</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Copyright (C) 2018, The University of Texas at Austin. All rights reserved.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * UNIVERSITY EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES CONCERNING THIS</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * SOFTWARE AND DOCUMENTATION, INCLUDING ANY WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * FITNESS FOR ANY PARTICULAR PURPOSE, NON-INFRINGEMENT AND WARRANTIES OF</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * PERFORMANCE, AND ANY WARRANTY THAT MIGHT OTHERWISE ARISE FROM COURSE OF</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * DEALING OR USAGE OF TRADE.  NO WARRANTY IS EITHER EXPRESS OR IMPLIED WITH</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * RESPECT TO THE USE OF THE SOFTWARE OR DOCUMENTATION. Under no circumstances</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * shall University be liable for incidental, special, indirect, direct or</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * consequential damages or loss of profits, interruption of business, or</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * related expenses which may arise from use of Software or Documentation,</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * including but not limited to those resulting from defects in Software and/or</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * Documentation, or loss or inaccuracy of data of any kind.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef KATANA_LIBGALOIS_KATANA_EXECUTORFOREACH_H_</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#define KATANA_LIBGALOIS_KATANA_EXECUTORFOREACH_H_</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Barrier_8h.html">katana/Barrier.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Chunk_8h.html">katana/Chunk.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Context_8h.html">katana/Context.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopStatistics_8h.html">katana/LoopStatistics.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Mem_8h.html">katana/Mem.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OperatorReferenceTypes_8h.html">katana/OperatorReferenceTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Range_8h.html">katana/Range.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Simple_8h.html">katana/Simple.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TerminationDetection_8h.html">katana/TerminationDetection.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ThreadPool_8h.html">katana/ThreadPool.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ThreadTimer_8h.html">katana/ThreadTimer.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Threads_8h.html">katana/Threads.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Timer_8h.html">katana/Timer.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Traits_8h.html">katana/Traits.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="UserContextAccess_8h.html">katana/UserContextAccess.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;katana/config.h&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gIO_8h.html">katana/gIO.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacekatana.html">katana</a> {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> value_type&gt;</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classkatana_1_1AbortHandler.html">   50</a></span>&#160;<span class="keyword">class </span><a class="code" href="classkatana_1_1AbortHandler.html">AbortHandler</a> {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keyword">struct </span>Item {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    value_type val;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">int</span> retries;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  };</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classkatana_1_1Wrapper.html">GFIFO&lt;Item&gt;</a> <a class="code" href="classkatana_1_1Wrapper.html">AbortedList</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classkatana_1_1PerThreadStorage.html">PerThreadStorage&lt;AbortedList&gt;</a> queues;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">bool</span> useBasicPolicy;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">void</span> basicPolicy(<span class="keyword">const</span> Item&amp; item) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">auto</span>&amp; tp = <a class="code" href="namespacekatana.html#a8e917129a0649c5fece62dca21858a41">GetThreadPool</a>();</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordtype">unsigned</span> socket = tp.getSocket();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a2a764888f724f882413ff4c446100c76">getRemote</a>(tp.getLeaderForSocket(socket / 2))-&gt;push(item);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  }</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordtype">void</span> doublePolicy(<span class="keyword">const</span> Item&amp; item) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">int</span> retries = item.retries - 1;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span> ((retries &amp; 1) == 1) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a5cad5a85aa6131cb476853d71375afce">getLocal</a>()-&gt;push(item);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">unsigned</span> tid = <a class="code" href="classkatana_1_1ThreadPool.html#ad2e037a424d92d0cdbadfe1892cf98df">ThreadPool::getTID</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">auto</span>&amp; tp = <a class="code" href="namespacekatana.html#a8e917129a0649c5fece62dca21858a41">GetThreadPool</a>();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">unsigned</span> socket = <a class="code" href="classkatana_1_1ThreadPool.html#ad39effd6378fb8120f3e2a587bc5c32f">ThreadPool::getSocket</a>();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">unsigned</span> leader = <a class="code" href="classkatana_1_1ThreadPool.html#a4a9f566c1557fe5eb5c19aea30ddf0ec">ThreadPool::getLeader</a>();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span> (tid != leader) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="keywordtype">unsigned</span> next = leader + (tid - leader) / 2;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a2a764888f724f882413ff4c446100c76">getRemote</a>(next)-&gt;push(item);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a2a764888f724f882413ff4c446100c76">getRemote</a>(tp.getLeaderForSocket(socket / 2))-&gt;<a class="code" href="classkatana_1_1AbortHandler.html#aab243e140bd4349b9ba34961b022809f">push</a>(item);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordtype">void</span> boundedPolicy(<span class="keyword">const</span> Item&amp; item) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">int</span> retries = item.retries - 1;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (retries &lt; 2) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a5cad5a85aa6131cb476853d71375afce">getLocal</a>()-&gt;push(item);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">unsigned</span> tid = <a class="code" href="classkatana_1_1ThreadPool.html#ad2e037a424d92d0cdbadfe1892cf98df">ThreadPool::getTID</a>();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keyword">auto</span>&amp; tp = <a class="code" href="namespacekatana.html#a8e917129a0649c5fece62dca21858a41">GetThreadPool</a>();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordtype">unsigned</span> socket = <a class="code" href="classkatana_1_1ThreadPool.html#ad39effd6378fb8120f3e2a587bc5c32f">ThreadPool::getSocket</a>();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">unsigned</span> leader = tp.getLeaderForSocket(socket);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (retries &lt; 5 &amp;&amp; tid != leader) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordtype">unsigned</span> next = leader + (tid - leader) / 2;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a2a764888f724f882413ff4c446100c76">getRemote</a>(next)-&gt;push(item);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a2a764888f724f882413ff4c446100c76">getRemote</a>(tp.getLeaderForSocket(socket / 2))-&gt;<a class="code" href="classkatana_1_1AbortHandler.html#aab243e140bd4349b9ba34961b022809f">push</a>(item);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordtype">void</span> eagerPolicy(<span class="keyword">const</span> Item&amp; item) { queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a5cad5a85aa6131cb476853d71375afce">getLocal</a>()-&gt;push(item); }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classkatana_1_1AbortHandler.html#a4bbc1b98c852438b8a05acd85bc3a724">  121</a></span>&#160;  <a class="code" href="classkatana_1_1AbortHandler.html#a4bbc1b98c852438b8a05acd85bc3a724">AbortHandler</a>() { useBasicPolicy = <a class="code" href="namespacekatana.html#a8e917129a0649c5fece62dca21858a41">GetThreadPool</a>().<a class="code" href="classkatana_1_1ThreadPool.html#adc41bcc0bbfbccbc8a2bd773c0bdeee0">getMaxSockets</a>() &gt; 2; }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="classkatana_1_1AbortHandler.html#ae66965ae730d0cfb695a0bb31a80393c">  123</a></span>&#160;  value_type&amp; <a class="code" href="classkatana_1_1AbortHandler.html#ae66965ae730d0cfb695a0bb31a80393c">value</a>(Item&amp; item)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> item.val; }</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classkatana_1_1AbortHandler.html#aa69273a9415398883a91ea0bd703ca35">  124</a></span>&#160;  value_type&amp; <a class="code" href="classkatana_1_1AbortHandler.html#aa69273a9415398883a91ea0bd703ca35">value</a>(value_type&amp; val)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> val; }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classkatana_1_1AbortHandler.html#aab243e140bd4349b9ba34961b022809f">  126</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1AbortHandler.html#aab243e140bd4349b9ba34961b022809f">push</a>(<span class="keyword">const</span> value_type&amp; val) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    Item item = {val, 1};</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a5cad5a85aa6131cb476853d71375afce">getLocal</a>()-&gt;push(item);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classkatana_1_1AbortHandler.html#a213734f06c6412797cc172590541e5ae">  131</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1AbortHandler.html#a213734f06c6412797cc172590541e5ae">push</a>(<span class="keyword">const</span> Item&amp; item) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    Item newitem = {item.val, item.retries + 1};</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (useBasicPolicy)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      basicPolicy(newitem);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      doublePolicy(newitem);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="classkatana_1_1AbortHandler.html#ad2c9f19f5fbc1ec81d19a6a8ab5a6ba4">  139</a></span>&#160;  <a class="code" href="classkatana_1_1Wrapper.html">AbortedList</a>* <a class="code" href="classkatana_1_1AbortHandler.html#ad2c9f19f5fbc1ec81d19a6a8ab5a6ba4">getQueue</a>() { <span class="keywordflow">return</span> queues.<a class="code" href="classkatana_1_1PerThreadStorage.html#a5cad5a85aa6131cb476853d71375afce">getLocal</a>(); }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;};</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">// TODO(ddn): Implement wrapper to allow calling without UserContext</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">// TODO(ddn): Check for operators that implement both with and without context</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> WorkListTy, <span class="keyword">class</span> FunctionTy, <span class="keyword">typename</span> ArgsTy&gt;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html">  145</a></span>&#160;<span class="keyword">class </span><a class="code" href="classkatana_1_1ForEachExecutor.html">ForEachExecutor</a> {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#aca6e88e18830b0930ff1b490000302c4">  147</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#aca6e88e18830b0930ff1b490000302c4">needStats</a> = katana::internal::NeedStats&lt;ArgsTy&gt;::value;</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a215e12730a9b4acd10cae6307e286691">  148</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a215e12730a9b4acd10cae6307e286691">needsPush</a> = !has_trait&lt;no_pushes_tag, ArgsTy&gt;();</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a3bb66e926bc51146a564c98f6ef8c082">  149</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a3bb66e926bc51146a564c98f6ef8c082">needsAborts</a> =</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      !has_trait&lt;disable_conflict_detection_tag, ArgsTy&gt;();</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a9271f1653f07b5f6f70919b5e002383b">  151</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a9271f1653f07b5f6f70919b5e002383b">needsPia</a> = has_trait&lt;per_iter_alloc_tag, ArgsTy&gt;();</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#afcd364e81213b213896c7fd3037afc27">  152</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#afcd364e81213b213896c7fd3037afc27">needsBreak</a> = has_trait&lt;parallel_break_tag, ArgsTy&gt;();</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#aba2bdb00af37351d24296555705ff02f">  153</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#aba2bdb00af37351d24296555705ff02f">MORE_STATS</a> =</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <a class="code" href="classkatana_1_1ForEachExecutor.html#aca6e88e18830b0930ff1b490000302c4">needStats</a> &amp;&amp; has_trait&lt;more_stats_tag, ArgsTy&gt;();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a376e2a3d58dd7ab767ac55454bbf8b15">  157</a></span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> WorkListTy::value_type <a class="code" href="classkatana_1_1ForEachExecutor.html#a376e2a3d58dd7ab767ac55454bbf8b15">value_type</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html">  159</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html">ThreadLocalBasics</a> {</div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">  160</a></span>&#160;    <a class="code" href="classkatana_1_1UserContextAccess.html">UserContextAccess&lt;value_type&gt;</a> <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">facing</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a90325fb3c764a02010dbe3a538b30dbb">  161</a></span>&#160;    FunctionTy <span class="keyword">function</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a9593e081b649ce2b3967145b8a50c9aa">  162</a></span>&#160;    <a class="code" href="classkatana_1_1SimpleRuntimeContext.html">SimpleRuntimeContext</a> <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a9593e081b649ce2b3967145b8a50c9aa">ctx</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a364f3bd1b24e058330f0281763917f9c">  164</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a364f3bd1b24e058330f0281763917f9c">ThreadLocalBasics</a>(FunctionTy fn) : <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">facing</a>(), <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a90325fb3c764a02010dbe3a538b30dbb">function</a>(fn), <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a9593e081b649ce2b3967145b8a50c9aa">ctx</a>() {}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  };</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a841f9c9ae8c8b6b474b6a72668d35f17">  167</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classkatana_1_1LoopStatistics.html">LoopStat</a> = <a class="code" href="classkatana_1_1LoopStatistics.html">LoopStatistics&lt;needStats&gt;</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">  169</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a> : <span class="keyword">public</span> <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html">ThreadLocalBasics</a>, <span class="keyword">public</span> <a class="code" href="classkatana_1_1LoopStatistics.html">LoopStat</a> {</div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html#a17da128a502794de58175462f82e485f">  170</a></span>&#160;    <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html#a17da128a502794de58175462f82e485f">ThreadLocalData</a>(FunctionTy fn, <span class="keyword">const</span> <span class="keywordtype">char</span>* ln)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        : <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html">ThreadLocalBasics</a>(fn), <a class="code" href="classkatana_1_1LoopStatistics.html">LoopStat</a>(ln) {}</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  };</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// RunQueueState factors out state within runQueue iterations to protect it</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// from being overwritten when using longjmp/setjmp.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> WL&gt;</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html">  177</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html">RunQueueState</a> {</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a4b4888e24ebe35fda714e436d9393917">  178</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a4b4888e24ebe35fda714e436d9393917">num</a> = 0;</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a358815138640087a104657a46f02f4ee">  179</a></span>&#160;    std::optional&lt;typename WL::value_type&gt; <a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a358815138640087a104657a46f02f4ee">item</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  };</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// NB: Place dynamically growing wl after fixed-size PerThreadStorage</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// members to give higher likelihood of reclaiming PerThreadStorage</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a73fa906c6af8e7da5fd382b74e26d209">  185</a></span>&#160;  <a class="code" href="classkatana_1_1AbortHandler.html">AbortHandler&lt;value_type&gt;</a> <a class="code" href="classkatana_1_1ForEachExecutor.html#a73fa906c6af8e7da5fd382b74e26d209">aborted</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#acfe15b69ae5cab96a2ff7bb2809a38ae">  186</a></span>&#160;  <a class="code" href="classkatana_1_1TerminationDetection.html">TerminationDetection</a>&amp; <a class="code" href="classkatana_1_1ForEachExecutor.html#acfe15b69ae5cab96a2ff7bb2809a38ae">term</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a22981fac3d11c41a18892f98ad2c78c4">  187</a></span>&#160;  <a class="code" href="classkatana_1_1Barrier.html">Barrier</a>&amp; <a class="code" href="classkatana_1_1ForEachExecutor.html#a22981fac3d11c41a18892f98ad2c78c4">barrier</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">  189</a></span>&#160;  WorkListTy <a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#afe89ad47903d650a7df70f321f1704d7">  190</a></span>&#160;  FunctionTy <a class="code" href="classkatana_1_1ForEachExecutor.html#afe89ad47903d650a7df70f321f1704d7">origFunction</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#ad2d168200dc042ec6071e14cf1a4b9e3">  191</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classkatana_1_1ForEachExecutor.html#ad2d168200dc042ec6071e14cf1a4b9e3">loopname</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a8932c9130842164db4c0a8161bdebfed">  192</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a8932c9130842164db4c0a8161bdebfed">broke</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a1c1d765c2c05c2dd0f332c03c651aac9">  194</a></span>&#160;  <a class="code" href="classkatana_1_1PerThreadTimer.html">PerThreadTimer&lt;MORE_STATS&gt;</a> <a class="code" href="classkatana_1_1ForEachExecutor.html#a1c1d765c2c05c2dd0f332c03c651aac9">initTime</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a2adcfa3b6657913f75ef1894e80599b2">  195</a></span>&#160;  <a class="code" href="classkatana_1_1PerThreadTimer.html">PerThreadTimer&lt;MORE_STATS&gt;</a> <a class="code" href="classkatana_1_1ForEachExecutor.html#a2adcfa3b6657913f75ef1894e80599b2">execTime</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a383c06529da0f511898e20e0475551c8">  197</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a383c06529da0f511898e20e0475551c8">commitIteration</a>(<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a>&amp; tld) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#a215e12730a9b4acd10cae6307e286691">needsPush</a>) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="comment">// auto ii = tld.facing.getPushBuffer().begin();</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="comment">// auto ee = tld.facing.getPushBuffer().end();</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keyword">auto</span>&amp; pb = tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">facing</a>.<a class="code" href="classkatana_1_1UserContextAccess.html#a5a562d3efdd538dac4caebbb8538a7fc">getPushBuffer</a>();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keyword">auto</span> n = pb.<a class="code" href="classkatana_1_1gdeque.html#ad6ba263865e4bf66d6a0927090cce81b">size</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (n) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        tld.<a class="code" href="classkatana_1_1LoopStatistics.html#a92d1f048d198ddcbee8cc3f77100f27f">inc_pushes</a>(n);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>.push(pb.begin(), pb.end());</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        pb.clear();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#a9271f1653f07b5f6f70919b5e002383b">needsPia</a>)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">facing</a>.<a class="code" href="classkatana_1_1UserContextAccess.html#a77f15a97745f32d09d9d320b62a4b9b2">resetAlloc</a>();</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#a3bb66e926bc51146a564c98f6ef8c082">needsAborts</a>)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a9593e081b649ce2b3967145b8a50c9aa">ctx</a>.<a class="code" href="classkatana_1_1SimpleRuntimeContext.html#abdc2aaed6c5bf155ab981914310c416b">commitIteration</a>();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">//++tld.stat_commits;</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Item&gt;</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a57a0cb3b53f66552d19edbf07bcaccd2">  217</a></span>&#160;  <a class="code" href="CompilerSpecific_8h.html#a211e2d7cd80f342d052cfe7e94451bfc">KATANA_ATTRIBUTE_NOINLINE</a> <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a57a0cb3b53f66552d19edbf07bcaccd2">abortIteration</a>(</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keyword">const</span> Item&amp; item, <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a>&amp; tld) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="Logging_8h.html#acb4f5b0dd598df41573616f8f1e2da3f">KATANA_LOG_DEBUG_ASSERT</a>(<a class="code" href="classkatana_1_1ForEachExecutor.html#a3bb66e926bc51146a564c98f6ef8c082">needsAborts</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a9593e081b649ce2b3967145b8a50c9aa">ctx</a>.<a class="code" href="classkatana_1_1SimpleRuntimeContext.html#a41ca6e3930216955d85cd870d7f7b668">cancelIteration</a>();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    tld.<a class="code" href="classkatana_1_1LoopStatistics.html#a88f8e853c633cd7e101852466a5d3065">inc_conflicts</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="classkatana_1_1ForEachExecutor.html#a73fa906c6af8e7da5fd382b74e26d209">aborted</a>.push(item);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// clear push buffer</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#a215e12730a9b4acd10cae6307e286691">needsPush</a>)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">facing</a>.<a class="code" href="classkatana_1_1UserContextAccess.html#ab2a8f3bf4ace3ab947903b357a24decd">resetPushBuffer</a>();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// reset allocator</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#a9271f1653f07b5f6f70919b5e002383b">needsPia</a>)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">facing</a>.<a class="code" href="classkatana_1_1UserContextAccess.html#a77f15a97745f32d09d9d320b62a4b9b2">resetAlloc</a>();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a6d97e7509ccb668c722880e6446390f6">  231</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a6d97e7509ccb668c722880e6446390f6">doProcess</a>(<a class="code" href="classkatana_1_1ForEachExecutor.html#a376e2a3d58dd7ab767ac55454bbf8b15">value_type</a>&amp; val, <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a>&amp; tld) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#a3bb66e926bc51146a564c98f6ef8c082">needsAborts</a>)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a9593e081b649ce2b3967145b8a50c9aa">ctx</a>.<a class="code" href="classkatana_1_1SimpleRuntimeContext.html#a4d715616c226c54e0338de42ad1e53e2">startIteration</a>();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    tld.<a class="code" href="classkatana_1_1LoopStatistics.html#a79ce7a6ea6775dfd8c1e15e5fd4765a1">inc_iterations</a>();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a90325fb3c764a02010dbe3a538b30dbb">function</a>(val, tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">facing</a>.<a class="code" href="classkatana_1_1UserContextAccess.html#a4c54bfe63b9937a5b34c058b2822f1fa">data</a>());</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="classkatana_1_1ForEachExecutor.html#a383c06529da0f511898e20e0475551c8">commitIteration</a>(tld);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a249a9b88b9a3b4f70c2f77d70adb6a5e">  240</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a249a9b88b9a3b4f70c2f77d70adb6a5e">runQueueSimple</a>(<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a>&amp; tld) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    std::optional&lt;value_type&gt; p;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordtype">bool</span> didWork = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">while</span> ((p = <a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>.pop())) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      didWork = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <a class="code" href="classkatana_1_1ForEachExecutor.html#a6d97e7509ccb668c722880e6446390f6">doProcess</a>(*p, tld);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">return</span> didWork;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> limit, <span class="keyword">typename</span> WL&gt;</div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a37735eeb6fa434ade8999e1638d7dca7">  251</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a37735eeb6fa434ade8999e1638d7dca7">runQueueDispatch</a>(<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a>&amp; tld, WL&amp; lwl, <a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html">RunQueueState&lt;WL&gt;</a>&amp; s) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">#ifdef KATANA_USE_LONGJMP_ABORT</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (setjmp(<a class="code" href="namespacekatana.html#a1beaf8c96891b65f684741e6923db0d4">execFrame</a>) == 0) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">while</span> ((!limit || s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a4b4888e24ebe35fda714e436d9393917">num</a> &lt; limit) &amp;&amp; (s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a358815138640087a104657a46f02f4ee">item</a> = lwl.pop())) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        ++s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a4b4888e24ebe35fda714e436d9393917">num</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a6d97e7509ccb668c722880e6446390f6">doProcess</a>(<a class="code" href="classkatana_1_1ForEachExecutor.html#a73fa906c6af8e7da5fd382b74e26d209">aborted</a>.value(*s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a358815138640087a104657a46f02f4ee">item</a>), tld);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      clearConflictLock();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="classkatana_1_1ForEachExecutor.html#a57a0cb3b53f66552d19edbf07bcaccd2">abortIteration</a>(*s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a358815138640087a104657a46f02f4ee">item</a>, tld);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#elif defined(KATANA_USE_EXCEPTION_ABORT)</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">while</span> ((!limit || s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a4b4888e24ebe35fda714e436d9393917">num</a> &lt; limit) &amp;&amp; (s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a358815138640087a104657a46f02f4ee">item</a> = lwl.pop())) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        ++s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a4b4888e24ebe35fda714e436d9393917">num</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a6d97e7509ccb668c722880e6446390f6">doProcess</a>(<a class="code" href="classkatana_1_1ForEachExecutor.html#a73fa906c6af8e7da5fd382b74e26d209">aborted</a>.value(*s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a358815138640087a104657a46f02f4ee">item</a>), tld);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    } <span class="keywordflow">catch</span> (<a class="code" href="namespacekatana.html#abe87e3fefa44cdaf3f6d806d46167ceb">ConflictFlag</a> <span class="keyword">const</span>&amp; flag) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      clearConflictLock();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="classkatana_1_1ForEachExecutor.html#a57a0cb3b53f66552d19edbf07bcaccd2">abortIteration</a>(*s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a358815138640087a104657a46f02f4ee">item</a>, tld);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> limit, <span class="keyword">typename</span> WL&gt;</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#ae6023644c0751a266da69d2924661c07">  276</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#ae6023644c0751a266da69d2924661c07">runQueue</a>(<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a>&amp; tld, WL&amp; lwl) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html">RunQueueState&lt;WL&gt;</a> s;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    runQueueDispatch&lt;limit&gt;(tld, lwl, s);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span> s.<a class="code" href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a4b4888e24ebe35fda714e436d9393917">num</a> &gt; 0;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <a class="code" href="CompilerSpecific_8h.html#a211e2d7cd80f342d052cfe7e94451bfc">KATANA_ATTRIBUTE_NOINLINE</a></div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a16c2c285cdcff7c3b197f98165998c20">  283</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a16c2c285cdcff7c3b197f98165998c20">handleAborts</a>(<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a>&amp; tld) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">return</span> runQueue&lt;0&gt;(tld, *<a class="code" href="classkatana_1_1ForEachExecutor.html#a73fa906c6af8e7da5fd382b74e26d209">aborted</a>.getQueue());</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#ad2efc0efbdb1b7af47deaf01facda735">  287</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#ad2efc0efbdb1b7af47deaf01facda735">fastPushBack</a>(<span class="keyword">typename</span> <a class="code" href="classkatana_1_1UserContextAccess.html">UserContextAccess&lt;value_type&gt;::PushBufferTy</a>&amp; x) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>.push(x.begin(), x.end());</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    x.clear();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#ada7a4dc23d1c06e07e6b5561a2b682cf">  292</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#ada7a4dc23d1c06e07e6b5561a2b682cf">checkEmpty</a>(WorkListTy&amp;, <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a>&amp;, ...) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> WL&gt;</div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#ab80aea53cdf78241e206c89c2e8f7352">  295</a></span>&#160;  <span class="keyword">auto</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#ab80aea53cdf78241e206c89c2e8f7352">checkEmpty</a>(WL&amp; <a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>, <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a>&amp;, <span class="keywordtype">int</span>)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      -&gt; decltype(<a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>.empty(), <span class="keywordtype">bool</span>()) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>.empty();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">bool</span> couldAbort, <span class="keywordtype">bool</span> isLeader&gt;</div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a7eaba4f7be259fe458820f591fbd3bd9">  301</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a7eaba4f7be259fe458820f591fbd3bd9">go</a>() {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="classkatana_1_1ForEachExecutor.html#a2adcfa3b6657913f75ef1894e80599b2">execTime</a>.<a class="code" href="classkatana_1_1PerThreadTimer.html#a02d6021484dfec19597f836b3ed2a833">start</a>();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// Thread-local data goes on the local stack to be NUMA friendly</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">ThreadLocalData</a> tld(<a class="code" href="classkatana_1_1ForEachExecutor.html#afe89ad47903d650a7df70f321f1704d7">origFunction</a>, <a class="code" href="structkatana_1_1loopname.html">loopname</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#afcd364e81213b213896c7fd3037afc27">needsBreak</a>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">facing</a>.<a class="code" href="classkatana_1_1UserContextAccess.html#afee85bdded13bc9d0fafb1a5586e60c9">setBreakFlag</a>(&amp;<a class="code" href="classkatana_1_1ForEachExecutor.html#a8932c9130842164db4c0a8161bdebfed">broke</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (couldAbort)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <a class="code" href="namespacekatana.html#aad4ffca2ccdc1c54f45f94808aac9306">setThreadContext</a>(&amp;tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a9593e081b649ce2b3967145b8a50c9aa">ctx</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#a215e12730a9b4acd10cae6307e286691">needsPush</a> &amp;&amp; !couldAbort)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      tld.<a class="code" href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">facing</a>.<a class="code" href="classkatana_1_1UserContextAccess.html#a7bc78ba794e089b500edadd19235ce05">setFastPushBack</a>(std::bind(</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          &amp;<a class="code" href="classkatana_1_1ForEachExecutor.html#ad2efc0efbdb1b7af47deaf01facda735">ForEachExecutor::fastPushBack</a>, <span class="keyword">this</span>, std::placeholders::_1));</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordtype">bool</span> didWork = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment">// Run some iterations</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">if</span> (couldAbort || <a class="code" href="classkatana_1_1ForEachExecutor.html#afcd364e81213b213896c7fd3037afc27">needsBreak</a>) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          constexpr <span class="keywordtype">int</span> __NUM = (<a class="code" href="classkatana_1_1ForEachExecutor.html#afcd364e81213b213896c7fd3037afc27">needsBreak</a> || isLeader) ? 64 : 0;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          <span class="keywordtype">bool</span> b = runQueue&lt;__NUM&gt;(tld, <a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          didWork = b || didWork;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          <span class="comment">// Check for abort</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <span class="keywordflow">if</span> (couldAbort) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            b = <a class="code" href="classkatana_1_1ForEachExecutor.html#a16c2c285cdcff7c3b197f98165998c20">handleAborts</a>(tld);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            didWork = b || didWork;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        } <span class="keywordflow">else</span> {  <span class="comment">// No try/catch</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          <span class="keywordtype">bool</span> b = <a class="code" href="classkatana_1_1ForEachExecutor.html#a249a9b88b9a3b4f70c2f77d70adb6a5e">runQueueSimple</a>(tld);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          didWork = b || didWork;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="comment">// Update node color and prop token</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#acfe15b69ae5cab96a2ff7bb2809a38ae">term</a>.<a class="code" href="classkatana_1_1TerminationDetection.html#af2dd421a8d5a90b829b0651b4d49f546">SignalWorked</a>(didWork);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        asmPause();  <span class="comment">// Let token propagate</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      } <span class="keywordflow">while</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#acfe15b69ae5cab96a2ff7bb2809a38ae">term</a>.<a class="code" href="classkatana_1_1TerminationDetection.html#a32ffcf1eb7e49fdb9405af9a3043f7ff">Working</a>() &amp;&amp; (!<a class="code" href="classkatana_1_1ForEachExecutor.html#afcd364e81213b213896c7fd3037afc27">needsBreak</a> || !<a class="code" href="classkatana_1_1ForEachExecutor.html#a8932c9130842164db4c0a8161bdebfed">broke</a>));</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#ada7a4dc23d1c06e07e6b5561a2b682cf">checkEmpty</a>(<a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>, tld, 0)) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a2adcfa3b6657913f75ef1894e80599b2">execTime</a>.<a class="code" href="classkatana_1_1PerThreadTimer.html#aa8841cc631de6a2e3e715de8c093ba91">stop</a>();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classkatana_1_1ForEachExecutor.html#afcd364e81213b213896c7fd3037afc27">needsBreak</a> &amp;&amp; <a class="code" href="classkatana_1_1ForEachExecutor.html#a8932c9130842164db4c0a8161bdebfed">broke</a>) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a2adcfa3b6657913f75ef1894e80599b2">execTime</a>.<a class="code" href="classkatana_1_1PerThreadTimer.html#aa8841cc631de6a2e3e715de8c093ba91">stop</a>();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <a class="code" href="classkatana_1_1ForEachExecutor.html#acfe15b69ae5cab96a2ff7bb2809a38ae">term</a>.<a class="code" href="classkatana_1_1TerminationDetection.html#a5764c5cd3b5f81004e675c7cd03703a7">InitializeThread</a>();</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="classkatana_1_1ForEachExecutor.html#a22981fac3d11c41a18892f98ad2c78c4">barrier</a>.<a class="code" href="classkatana_1_1Barrier.html#acbd6bd94bf2727bd6150e7b54377d2b2">Wait</a>();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (couldAbort)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <a class="code" href="namespacekatana.html#aad4ffca2ccdc1c54f45f94808aac9306">setThreadContext</a>(0);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1T1.html">  356</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structkatana_1_1ForEachExecutor_1_1T1.html">T1</a> {};</div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="structkatana_1_1ForEachExecutor_1_1T2.html">  357</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structkatana_1_1ForEachExecutor_1_1T2.html">T2</a> {};</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span>... WArgsTy&gt;</div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a891192ffa01616ea748ecbb00e1ff211">  360</a></span>&#160;  <a class="code" href="classkatana_1_1ForEachExecutor.html#a891192ffa01616ea748ecbb00e1ff211">ForEachExecutor</a>(<a class="code" href="structkatana_1_1ForEachExecutor_1_1T2.html">T2</a>, FunctionTy f, <span class="keyword">const</span> ArgsTy&amp; args, WArgsTy... wargs)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      : <a class="code" href="classkatana_1_1ForEachExecutor.html#acfe15b69ae5cab96a2ff7bb2809a38ae">term</a>(<a class="code" href="namespacekatana.html#acdd775f6f963127a8d60f0480545c28b">GetTerminationDetection</a>(<a class="code" href="namespacekatana.html#afea83498ac35d84218d622ef40b4aa41">activeThreads</a>)),</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a22981fac3d11c41a18892f98ad2c78c4">barrier</a>(<a class="code" href="namespacekatana.html#ab473e662b3aed5db12ebd185fca76f11">GetBarrier</a>(<a class="code" href="namespacekatana.html#afea83498ac35d84218d622ef40b4aa41">activeThreads</a>)),</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>(std::forward&lt;WArgsTy&gt;(wargs)...),</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#afe89ad47903d650a7df70f321f1704d7">origFunction</a>(f),</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="structkatana_1_1loopname.html">loopname</a>(<a class="code" href="namespacekatana.html">katana</a>::internal::getLoopName(args)),</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a8932c9130842164db4c0a8161bdebfed">broke</a>(false),</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a1c1d765c2c05c2dd0f332c03c651aac9">initTime</a>(<a class="code" href="structkatana_1_1loopname.html">loopname</a>, <span class="stringliteral">&quot;Init&quot;</span>),</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="classkatana_1_1ForEachExecutor.html#a2adcfa3b6657913f75ef1894e80599b2">execTime</a>(<a class="code" href="structkatana_1_1loopname.html">loopname</a>, <span class="stringliteral">&quot;Execute&quot;</span>) {}</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> WArgsTy, <span class="keywordtype">size_t</span>... Is&gt;</div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a48fbd37d6c22cc1fe295678679b2c790">  371</a></span>&#160;  <a class="code" href="classkatana_1_1ForEachExecutor.html#a48fbd37d6c22cc1fe295678679b2c790">ForEachExecutor</a>(</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <a class="code" href="structkatana_1_1ForEachExecutor_1_1T1.html">T1</a>, FunctionTy f, <span class="keyword">const</span> ArgsTy&amp; args, <span class="keyword">const</span> WArgsTy&amp; wlargs,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      std::index_sequence&lt;Is...&gt;)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      : <a class="code" href="classkatana_1_1ForEachExecutor.html">ForEachExecutor</a>(<a class="code" href="structkatana_1_1ForEachExecutor_1_1T2.html">T2</a>{}, f, args, std::get&lt;Is&gt;(wlargs)...) {}</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> WArgsTy&gt;</div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a0f3206535d12d2ef0f20c82126330bc4">  377</a></span>&#160;  <a class="code" href="classkatana_1_1ForEachExecutor.html#a0f3206535d12d2ef0f20c82126330bc4">ForEachExecutor</a>(</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <a class="code" href="structkatana_1_1ForEachExecutor_1_1T1.html">T1</a>, FunctionTy f, <span class="keyword">const</span> ArgsTy&amp; args, <span class="keyword">const</span> WArgsTy&amp;,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      std::index_sequence&lt;&gt;)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      : <a class="code" href="classkatana_1_1ForEachExecutor.html">ForEachExecutor</a>(<a class="code" href="structkatana_1_1ForEachExecutor_1_1T2.html">T2</a>{}, f, args) {}</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#ab34437d1cd5fd3e03240ca044302f74c">  383</a></span>&#160;  <a class="code" href="classkatana_1_1ForEachExecutor.html#ab34437d1cd5fd3e03240ca044302f74c">ForEachExecutor</a>(FunctionTy f, <span class="keyword">const</span> ArgsTy&amp; args)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      : <a class="code" href="classkatana_1_1ForEachExecutor.html">ForEachExecutor</a>(</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <a class="code" href="structkatana_1_1ForEachExecutor_1_1T1.html">T1</a>{}, f, args, <a class="code" href="namespacekatana.html#a7d27f1df6ceb0d7194a24a576f173de5">get_trait_value</a>&lt;<a class="code" href="structkatana_1_1wl__tag.html">wl_tag</a>&gt;(args).args,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            std::make_index_sequence&lt;std::tuple_size&lt;decltype(</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <a class="code" href="namespacekatana.html#a7d27f1df6ceb0d7194a24a576f173de5">get_trait_value</a>&lt;<a class="code" href="structkatana_1_1wl__tag.html">wl_tag</a>&gt;(args).args)&gt;::value&gt;{}) {}</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> RangeTy&gt;</div>
<div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a3e6b52500529eda6db72ea36c5a92106">  390</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a3e6b52500529eda6db72ea36c5a92106">init</a>(<span class="keyword">const</span> RangeTy&amp;) {}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> RangeTy&gt;</div>
<div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#ad9eb23cb56aea92a03d7e6d87f6ef5a7">  393</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#ad9eb23cb56aea92a03d7e6d87f6ef5a7">initThread</a>(<span class="keyword">const</span> RangeTy&amp; range) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="classkatana_1_1ForEachExecutor.html#a1c1d765c2c05c2dd0f332c03c651aac9">initTime</a>.<a class="code" href="classkatana_1_1PerThreadTimer.html#a02d6021484dfec19597f836b3ed2a833">start</a>();</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">wl</a>.push_initial(range);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="classkatana_1_1ForEachExecutor.html#acfe15b69ae5cab96a2ff7bb2809a38ae">term</a>.<a class="code" href="classkatana_1_1TerminationDetection.html#a5764c5cd3b5f81004e675c7cd03703a7">InitializeThread</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="classkatana_1_1ForEachExecutor.html#a1c1d765c2c05c2dd0f332c03c651aac9">initTime</a>.<a class="code" href="classkatana_1_1PerThreadTimer.html#aa8841cc631de6a2e3e715de8c093ba91">stop</a>();</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="classkatana_1_1ForEachExecutor.html#a777c26f526a27499e3a35410ec807d2b">  402</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classkatana_1_1ForEachExecutor.html#a777c26f526a27499e3a35410ec807d2b">operator()</a>() {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">bool</span> isLeader = <a class="code" href="classkatana_1_1ThreadPool.html#a9f91fd7abfc3266f838fc3516306ee9a">ThreadPool::isLeader</a>();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">bool</span> couldAbort = <a class="code" href="classkatana_1_1ForEachExecutor.html#a3bb66e926bc51146a564c98f6ef8c082">needsAborts</a> &amp;&amp; <a class="code" href="namespacekatana.html#afea83498ac35d84218d622ef40b4aa41">activeThreads</a> &gt; 1;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (couldAbort &amp;&amp; isLeader)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      go&lt;true, true&gt;();</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (couldAbort &amp;&amp; !isLeader)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      go&lt;true, false&gt;();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!couldAbort &amp;&amp; isLeader)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      go&lt;false, true&gt;();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      go&lt;false, false&gt;();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;};</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> WLTy&gt;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;constexpr <span class="keyword">auto</span></div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="namespacekatana.html#a442cf800869fdedc926894feecc5df21">  418</a></span>&#160;<a class="code" href="namespacekatana.html#a442cf800869fdedc926894feecc5df21">has_with_iterator</a>(<span class="keywordtype">int</span>) -&gt; decltype(</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    std::declval&lt;<span class="keyword">typename</span> WLTy::template with_iterator&lt;int*&gt;::type&gt;(), <span class="keywordtype">bool</span>()) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;constexpr <span class="keyword">auto</span></div>
<div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="namespacekatana.html#a6887981974026f0de7127ee8bdd290ca">  425</a></span>&#160;<a class="code" href="namespacekatana.html#a442cf800869fdedc926894feecc5df21">has_with_iterator</a>(...) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;}</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> WLTy, <span class="keyword">typename</span> IterTy, <span class="keyword">typename</span> Enable = <span class="keywordtype">void</span>&gt;</div>
<div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="structkatana_1_1reiterator.html">  430</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structkatana_1_1reiterator.html">reiterator</a> {</div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="structkatana_1_1reiterator.html#a7cf8caadf6a38597d847bde3a641c75b">  431</a></span>&#160;  <span class="keyword">typedef</span> WLTy <a class="code" href="structkatana_1_1reiterator.html#a7cf8caadf6a38597d847bde3a641c75b">type</a>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;};</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> WLTy, <span class="keyword">typename</span> IterTy&gt;</div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="structkatana_1_1reiterator_3_01WLTy_00_01IterTy_00_01typename_01std_1_1enable__if_3_01has__with_4074605c49f6ca5bb8f58c9b75e7199d.html">  435</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structkatana_1_1reiterator.html">reiterator</a>&lt;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    WLTy, IterTy, typename std::enable_if&lt;has_with_iterator&lt;WLTy&gt;(0)&gt;<a class="code" href="structkatana_1_1reiterator_3_01WLTy_00_01IterTy_00_01typename_01std_1_1enable__if_3_01has__with_4074605c49f6ca5bb8f58c9b75e7199d.html#a985524badbef461236ee9bbff26859ca">::type</a>&gt; {</div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="structkatana_1_1reiterator_3_01WLTy_00_01IterTy_00_01typename_01std_1_1enable__if_3_01has__with_4074605c49f6ca5bb8f58c9b75e7199d.html#a985524badbef461236ee9bbff26859ca">  437</a></span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> WLTy::template with_iterator&lt;IterTy&gt;::type <a class="code" href="structkatana_1_1reiterator_3_01WLTy_00_01IterTy_00_01typename_01std_1_1enable__if_3_01has__with_4074605c49f6ca5bb8f58c9b75e7199d.html#a985524badbef461236ee9bbff26859ca">type</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;};</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">// TODO(ddn): Think about folding in range into args too</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> RangeTy, <span class="keyword">typename</span> FunctionTy, <span class="keyword">typename</span> ArgsTy&gt;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="namespacekatana.html#a7f1bb8b9db99383005c03685212ceeac">  443</a></span>&#160;<a class="code" href="namespacekatana.html#a7f1bb8b9db99383005c03685212ceeac">for_each_impl</a>(<span class="keyword">const</span> RangeTy&amp; range, FunctionTy&amp;&amp; fn, <span class="keyword">const</span> ArgsTy&amp; args) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> std::iterator_traits&lt;typename RangeTy::iterator&gt;::value_type</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      value_type;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structkatana_1_1trait__type.html">trait_type&lt;wl_tag, ArgsTy&gt;::type::type</a> BaseWorkListTy;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structkatana_1_1reiterator.html">reiterator&lt;BaseWorkListTy, typename RangeTy::iterator&gt;</a>::</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      type ::template retype&lt;value_type&gt;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          WorkListTy;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keyword">using</span> FuncRefType =</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <a class="code" href="namespacekatana.html#a7456f5718807adfd1dafa96512a3bf5f">OperatorReferenceType&lt;decltype(std::forward&lt;FunctionTy&gt;</a>(fn))&gt;;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classkatana_1_1ForEachExecutor.html">ForEachExecutor&lt;WorkListTy, FuncRefType, ArgsTy&gt;</a> WorkTy;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keyword">auto</span>&amp; barrier = <a class="code" href="namespacekatana.html#ab473e662b3aed5db12ebd185fca76f11">GetBarrier</a>(<a class="code" href="namespacekatana.html#afea83498ac35d84218d622ef40b4aa41">activeThreads</a>);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  FuncRefType fn_ref = fn;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  WorkTy W(fn_ref, args);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  W.init(range);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <a class="code" href="namespacekatana.html#a8e917129a0649c5fece62dca21858a41">GetThreadPool</a>().<a class="code" href="classkatana_1_1ThreadPool.html#a8f4cf7ca25aa12feafd5daa204f97680">run</a>(</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <a class="code" href="namespacekatana.html#afea83498ac35d84218d622ef40b4aa41">activeThreads</a>, [&amp;W, &amp;range]() { W.initThread(range); },</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      [&amp;barrier] { barrier.Wait(); }, std::ref(W));</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">// TODO: Need to decide whether user should provide num_run tag or</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">// num_run can be provided by loop instance which is guaranteed to be unique</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> RangeTy, <span class="keyword">typename</span> FunctionTy, <span class="keyword">typename</span> TupleTy&gt;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="namespacekatana.html#a07cdf1268c8feb6ae8c3a2ecd81e7a92">  469</a></span>&#160;<a class="code" href="namespacekatana.html#a07cdf1268c8feb6ae8c3a2ecd81e7a92">for_each_gen</a>(<span class="keyword">const</span> RangeTy&amp; r, FunctionTy&amp;&amp; fn, <span class="keyword">const</span> TupleTy&amp; tpl) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  static_assert(!has_trait&lt;char*, TupleTy&gt;(), <span class="stringliteral">&quot;old loopname&quot;</span>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  static_assert(!has_trait&lt;char const*, TupleTy&gt;(), <span class="stringliteral">&quot;old loopname&quot;</span>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  static_assert(!has_trait&lt;bool, TupleTy&gt;(), <span class="stringliteral">&quot;old steal&quot;</span>);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keyword">auto</span> ftpl = std::tuple_cat(tpl, <span class="keyword">typename</span> <a class="code" href="structkatana_1_1function__traits.html#ae6f1117f10d28783d87d1fd7856dd873">function_traits&lt;FunctionTy&gt;::type</a>{});</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keyword">auto</span> xtpl = std::tuple_cat(</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      ftpl,</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="namespacekatana.html#a55c2e6fc71d4a95b2a467e038d125e5e">get_default_trait_values</a>(</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          tpl, std::make_tuple(<a class="code" href="structkatana_1_1wl__tag.html">wl_tag</a>{}), std::make_tuple(wl&lt;defaultWL&gt;())));</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  constexpr <span class="keywordtype">bool</span> TIME_IT = has_trait&lt;loopname_tag, decltype(xtpl)&gt;();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <a class="code" href="classkatana_1_1CondStatTimer.html">CondStatTimer&lt;TIME_IT&gt;</a> timer(katana::internal::getLoopName(xtpl));</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  timer.<a class="code" href="classkatana_1_1StatTimer.html#abf7b1d592158dee50482feabe4ee5daf">start</a>();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="namespacekatana.html#a7f1bb8b9db99383005c03685212ceeac">for_each_impl</a>(r, std::forward&lt;FunctionTy&gt;(fn), xtpl);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  timer.<a class="code" href="classkatana_1_1StatTimer.html#ad200173bde20a290c303d59ba6095daf">stop</a>();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;}  <span class="comment">// end namespace katana</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="aBarrier_8h_html"><div class="ttname"><a href="Barrier_8h.html">Barrier.h</a></div></div>
<div class="ttc" id="aChunk_8h_html"><div class="ttname"><a href="Chunk_8h.html">Chunk.h</a></div></div>
<div class="ttc" id="aCompilerSpecific_8h_html_a211e2d7cd80f342d052cfe7e94451bfc"><div class="ttname"><a href="CompilerSpecific_8h.html#a211e2d7cd80f342d052cfe7e94451bfc">KATANA_ATTRIBUTE_NOINLINE</a></div><div class="ttdeci">#define KATANA_ATTRIBUTE_NOINLINE</div><div class="ttdef"><b>Definition:</b> CompilerSpecific.h:50</div></div>
<div class="ttc" id="aContext_8h_html"><div class="ttname"><a href="Context_8h.html">Context.h</a></div></div>
<div class="ttc" id="aLogging_8h_html_acb4f5b0dd598df41573616f8f1e2da3f"><div class="ttname"><a href="Logging_8h.html#acb4f5b0dd598df41573616f8f1e2da3f">KATANA_LOG_DEBUG_ASSERT</a></div><div class="ttdeci">#define KATANA_LOG_DEBUG_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> Logging.h:150</div></div>
<div class="ttc" id="aLoopStatistics_8h_html"><div class="ttname"><a href="LoopStatistics_8h.html">LoopStatistics.h</a></div></div>
<div class="ttc" id="aMem_8h_html"><div class="ttname"><a href="Mem_8h.html">Mem.h</a></div></div>
<div class="ttc" id="aOperatorReferenceTypes_8h_html"><div class="ttname"><a href="OperatorReferenceTypes_8h.html">OperatorReferenceTypes.h</a></div></div>
<div class="ttc" id="aRange_8h_html"><div class="ttname"><a href="Range_8h.html">Range.h</a></div></div>
<div class="ttc" id="aSimple_8h_html"><div class="ttname"><a href="Simple_8h.html">Simple.h</a></div></div>
<div class="ttc" id="aTerminationDetection_8h_html"><div class="ttname"><a href="TerminationDetection_8h.html">TerminationDetection.h</a></div></div>
<div class="ttc" id="aThreadPool_8h_html"><div class="ttname"><a href="ThreadPool_8h.html">ThreadPool.h</a></div></div>
<div class="ttc" id="aThreadTimer_8h_html"><div class="ttname"><a href="ThreadTimer_8h.html">ThreadTimer.h</a></div></div>
<div class="ttc" id="aThreads_8h_html"><div class="ttname"><a href="Threads_8h.html">Threads.h</a></div></div>
<div class="ttc" id="aTimer_8h_html"><div class="ttname"><a href="Timer_8h.html">Timer.h</a></div></div>
<div class="ttc" id="aTraits_8h_html"><div class="ttname"><a href="Traits_8h.html">Traits.h</a></div></div>
<div class="ttc" id="aUserContextAccess_8h_html"><div class="ttname"><a href="UserContextAccess_8h.html">UserContextAccess.h</a></div></div>
<div class="ttc" id="aclasskatana_1_1AbortHandler_html"><div class="ttname"><a href="classkatana_1_1AbortHandler.html">katana::AbortHandler</a></div><div class="ttdoc">Internal Galois functionality - Use at your own risk.</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:50</div></div>
<div class="ttc" id="aclasskatana_1_1AbortHandler_html_a213734f06c6412797cc172590541e5ae"><div class="ttname"><a href="classkatana_1_1AbortHandler.html#a213734f06c6412797cc172590541e5ae">katana::AbortHandler::push</a></div><div class="ttdeci">void push(const Item &amp;item)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:131</div></div>
<div class="ttc" id="aclasskatana_1_1AbortHandler_html_a4bbc1b98c852438b8a05acd85bc3a724"><div class="ttname"><a href="classkatana_1_1AbortHandler.html#a4bbc1b98c852438b8a05acd85bc3a724">katana::AbortHandler::AbortHandler</a></div><div class="ttdeci">AbortHandler()</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:121</div></div>
<div class="ttc" id="aclasskatana_1_1AbortHandler_html_aa69273a9415398883a91ea0bd703ca35"><div class="ttname"><a href="classkatana_1_1AbortHandler.html#aa69273a9415398883a91ea0bd703ca35">katana::AbortHandler::value</a></div><div class="ttdeci">value_type &amp; value(value_type &amp;val) const</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:124</div></div>
<div class="ttc" id="aclasskatana_1_1AbortHandler_html_aab243e140bd4349b9ba34961b022809f"><div class="ttname"><a href="classkatana_1_1AbortHandler.html#aab243e140bd4349b9ba34961b022809f">katana::AbortHandler::push</a></div><div class="ttdeci">void push(const value_type &amp;val)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:126</div></div>
<div class="ttc" id="aclasskatana_1_1AbortHandler_html_ad2c9f19f5fbc1ec81d19a6a8ab5a6ba4"><div class="ttname"><a href="classkatana_1_1AbortHandler.html#ad2c9f19f5fbc1ec81d19a6a8ab5a6ba4">katana::AbortHandler::getQueue</a></div><div class="ttdeci">AbortedList * getQueue()</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:139</div></div>
<div class="ttc" id="aclasskatana_1_1AbortHandler_html_ae66965ae730d0cfb695a0bb31a80393c"><div class="ttname"><a href="classkatana_1_1AbortHandler.html#ae66965ae730d0cfb695a0bb31a80393c">katana::AbortHandler::value</a></div><div class="ttdeci">value_type &amp; value(Item &amp;item) const</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:123</div></div>
<div class="ttc" id="aclasskatana_1_1Barrier_html"><div class="ttname"><a href="classkatana_1_1Barrier.html">katana::Barrier</a></div><div class="ttdef"><b>Definition:</b> Barrier.h:29</div></div>
<div class="ttc" id="aclasskatana_1_1Barrier_html_acbd6bd94bf2727bd6150e7b54377d2b2"><div class="ttname"><a href="classkatana_1_1Barrier.html#acbd6bd94bf2727bd6150e7b54377d2b2">katana::Barrier::Wait</a></div><div class="ttdeci">virtual void Wait()=0</div></div>
<div class="ttc" id="aclasskatana_1_1CondStatTimer_html"><div class="ttname"><a href="classkatana_1_1CondStatTimer.html">katana::CondStatTimer</a></div><div class="ttdef"><b>Definition:</b> Timer.h:88</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html">katana::ForEachExecutor</a></div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:145</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a0f3206535d12d2ef0f20c82126330bc4"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a0f3206535d12d2ef0f20c82126330bc4">katana::ForEachExecutor::ForEachExecutor</a></div><div class="ttdeci">ForEachExecutor(T1, FunctionTy f, const ArgsTy &amp;args, const WArgsTy &amp;, std::index_sequence&lt;&gt;)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:377</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a16c2c285cdcff7c3b197f98165998c20"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a16c2c285cdcff7c3b197f98165998c20">katana::ForEachExecutor::handleAborts</a></div><div class="ttdeci">KATANA_ATTRIBUTE_NOINLINE bool handleAborts(ThreadLocalData &amp;tld)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:283</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a1c1d765c2c05c2dd0f332c03c651aac9"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a1c1d765c2c05c2dd0f332c03c651aac9">katana::ForEachExecutor::initTime</a></div><div class="ttdeci">PerThreadTimer&lt; MORE_STATS &gt; initTime</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:194</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a215e12730a9b4acd10cae6307e286691"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a215e12730a9b4acd10cae6307e286691">katana::ForEachExecutor::needsPush</a></div><div class="ttdeci">static constexpr bool needsPush</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:148</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a22981fac3d11c41a18892f98ad2c78c4"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a22981fac3d11c41a18892f98ad2c78c4">katana::ForEachExecutor::barrier</a></div><div class="ttdeci">Barrier &amp; barrier</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:187</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a249a9b88b9a3b4f70c2f77d70adb6a5e"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a249a9b88b9a3b4f70c2f77d70adb6a5e">katana::ForEachExecutor::runQueueSimple</a></div><div class="ttdeci">bool runQueueSimple(ThreadLocalData &amp;tld)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:240</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a259d6f2b23d242c0e8c9773af637ec9e"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a259d6f2b23d242c0e8c9773af637ec9e">katana::ForEachExecutor::wl</a></div><div class="ttdeci">WorkListTy wl</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:189</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a2adcfa3b6657913f75ef1894e80599b2"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a2adcfa3b6657913f75ef1894e80599b2">katana::ForEachExecutor::execTime</a></div><div class="ttdeci">PerThreadTimer&lt; MORE_STATS &gt; execTime</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:195</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a376e2a3d58dd7ab767ac55454bbf8b15"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a376e2a3d58dd7ab767ac55454bbf8b15">katana::ForEachExecutor::value_type</a></div><div class="ttdeci">WorkListTy::value_type value_type</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:157</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a37735eeb6fa434ade8999e1638d7dca7"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a37735eeb6fa434ade8999e1638d7dca7">katana::ForEachExecutor::runQueueDispatch</a></div><div class="ttdeci">void runQueueDispatch(ThreadLocalData &amp;tld, WL &amp;lwl, RunQueueState&lt; WL &gt; &amp;s)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:251</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a383c06529da0f511898e20e0475551c8"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a383c06529da0f511898e20e0475551c8">katana::ForEachExecutor::commitIteration</a></div><div class="ttdeci">void commitIteration(ThreadLocalData &amp;tld)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:197</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a3bb66e926bc51146a564c98f6ef8c082"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a3bb66e926bc51146a564c98f6ef8c082">katana::ForEachExecutor::needsAborts</a></div><div class="ttdeci">static constexpr bool needsAborts</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:149</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a3e6b52500529eda6db72ea36c5a92106"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a3e6b52500529eda6db72ea36c5a92106">katana::ForEachExecutor::init</a></div><div class="ttdeci">void init(const RangeTy &amp;)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:390</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a48fbd37d6c22cc1fe295678679b2c790"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a48fbd37d6c22cc1fe295678679b2c790">katana::ForEachExecutor::ForEachExecutor</a></div><div class="ttdeci">ForEachExecutor(T1, FunctionTy f, const ArgsTy &amp;args, const WArgsTy &amp;wlargs, std::index_sequence&lt; Is... &gt;)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:371</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a57a0cb3b53f66552d19edbf07bcaccd2"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a57a0cb3b53f66552d19edbf07bcaccd2">katana::ForEachExecutor::abortIteration</a></div><div class="ttdeci">KATANA_ATTRIBUTE_NOINLINE void abortIteration(const Item &amp;item, ThreadLocalData &amp;tld)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:217</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a6d97e7509ccb668c722880e6446390f6"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a6d97e7509ccb668c722880e6446390f6">katana::ForEachExecutor::doProcess</a></div><div class="ttdeci">void doProcess(value_type &amp;val, ThreadLocalData &amp;tld)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:231</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a73fa906c6af8e7da5fd382b74e26d209"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a73fa906c6af8e7da5fd382b74e26d209">katana::ForEachExecutor::aborted</a></div><div class="ttdeci">AbortHandler&lt; value_type &gt; aborted</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:185</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a777c26f526a27499e3a35410ec807d2b"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a777c26f526a27499e3a35410ec807d2b">katana::ForEachExecutor::operator()</a></div><div class="ttdeci">void operator()()</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:402</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a7eaba4f7be259fe458820f591fbd3bd9"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a7eaba4f7be259fe458820f591fbd3bd9">katana::ForEachExecutor::go</a></div><div class="ttdeci">void go()</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:301</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a891192ffa01616ea748ecbb00e1ff211"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a891192ffa01616ea748ecbb00e1ff211">katana::ForEachExecutor::ForEachExecutor</a></div><div class="ttdeci">ForEachExecutor(T2, FunctionTy f, const ArgsTy &amp;args, WArgsTy... wargs)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:360</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a8932c9130842164db4c0a8161bdebfed"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a8932c9130842164db4c0a8161bdebfed">katana::ForEachExecutor::broke</a></div><div class="ttdeci">bool broke</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:192</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_a9271f1653f07b5f6f70919b5e002383b"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#a9271f1653f07b5f6f70919b5e002383b">katana::ForEachExecutor::needsPia</a></div><div class="ttdeci">static constexpr bool needsPia</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:151</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_ab34437d1cd5fd3e03240ca044302f74c"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#ab34437d1cd5fd3e03240ca044302f74c">katana::ForEachExecutor::ForEachExecutor</a></div><div class="ttdeci">ForEachExecutor(FunctionTy f, const ArgsTy &amp;args)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:383</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_ab80aea53cdf78241e206c89c2e8f7352"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#ab80aea53cdf78241e206c89c2e8f7352">katana::ForEachExecutor::checkEmpty</a></div><div class="ttdeci">auto checkEmpty(WL &amp;wl, ThreadLocalData &amp;, int) -&gt; decltype(wl.empty(), bool())</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:295</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_aba2bdb00af37351d24296555705ff02f"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#aba2bdb00af37351d24296555705ff02f">katana::ForEachExecutor::MORE_STATS</a></div><div class="ttdeci">static constexpr bool MORE_STATS</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:153</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_aca6e88e18830b0930ff1b490000302c4"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#aca6e88e18830b0930ff1b490000302c4">katana::ForEachExecutor::needStats</a></div><div class="ttdeci">static constexpr bool needStats</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:147</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_acfe15b69ae5cab96a2ff7bb2809a38ae"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#acfe15b69ae5cab96a2ff7bb2809a38ae">katana::ForEachExecutor::term</a></div><div class="ttdeci">TerminationDetection &amp; term</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:186</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_ad2d168200dc042ec6071e14cf1a4b9e3"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#ad2d168200dc042ec6071e14cf1a4b9e3">katana::ForEachExecutor::loopname</a></div><div class="ttdeci">const char * loopname</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:191</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_ad2efc0efbdb1b7af47deaf01facda735"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#ad2efc0efbdb1b7af47deaf01facda735">katana::ForEachExecutor::fastPushBack</a></div><div class="ttdeci">void fastPushBack(typename UserContextAccess&lt; value_type &gt;::PushBufferTy &amp;x)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:287</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_ad9eb23cb56aea92a03d7e6d87f6ef5a7"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#ad9eb23cb56aea92a03d7e6d87f6ef5a7">katana::ForEachExecutor::initThread</a></div><div class="ttdeci">void initThread(const RangeTy &amp;range)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:393</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_ada7a4dc23d1c06e07e6b5561a2b682cf"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#ada7a4dc23d1c06e07e6b5561a2b682cf">katana::ForEachExecutor::checkEmpty</a></div><div class="ttdeci">bool checkEmpty(WorkListTy &amp;, ThreadLocalData &amp;,...)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:292</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_ae6023644c0751a266da69d2924661c07"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#ae6023644c0751a266da69d2924661c07">katana::ForEachExecutor::runQueue</a></div><div class="ttdeci">bool runQueue(ThreadLocalData &amp;tld, WL &amp;lwl)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:276</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_afcd364e81213b213896c7fd3037afc27"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#afcd364e81213b213896c7fd3037afc27">katana::ForEachExecutor::needsBreak</a></div><div class="ttdeci">static constexpr bool needsBreak</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:152</div></div>
<div class="ttc" id="aclasskatana_1_1ForEachExecutor_html_afe89ad47903d650a7df70f321f1704d7"><div class="ttname"><a href="classkatana_1_1ForEachExecutor.html#afe89ad47903d650a7df70f321f1704d7">katana::ForEachExecutor::origFunction</a></div><div class="ttdeci">FunctionTy origFunction</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:190</div></div>
<div class="ttc" id="aclasskatana_1_1LoopStatistics_html"><div class="ttname"><a href="classkatana_1_1LoopStatistics.html">katana::LoopStatistics</a></div><div class="ttdef"><b>Definition:</b> LoopStatistics.h:30</div></div>
<div class="ttc" id="aclasskatana_1_1LoopStatistics_html_a79ce7a6ea6775dfd8c1e15e5fd4765a1"><div class="ttname"><a href="classkatana_1_1LoopStatistics.html#a79ce7a6ea6775dfd8c1e15e5fd4765a1">katana::LoopStatistics::inc_iterations</a></div><div class="ttdeci">void inc_iterations()</div><div class="ttdef"><b>Definition:</b> LoopStatistics.h:54</div></div>
<div class="ttc" id="aclasskatana_1_1LoopStatistics_html_a88f8e853c633cd7e101852466a5d3065"><div class="ttname"><a href="classkatana_1_1LoopStatistics.html#a88f8e853c633cd7e101852466a5d3065">katana::LoopStatistics::inc_conflicts</a></div><div class="ttdeci">void inc_conflicts()</div><div class="ttdef"><b>Definition:</b> LoopStatistics.h:56</div></div>
<div class="ttc" id="aclasskatana_1_1LoopStatistics_html_a92d1f048d198ddcbee8cc3f77100f27f"><div class="ttname"><a href="classkatana_1_1LoopStatistics.html#a92d1f048d198ddcbee8cc3f77100f27f">katana::LoopStatistics::inc_pushes</a></div><div class="ttdeci">void inc_pushes(size_t v)</div><div class="ttdef"><b>Definition:</b> LoopStatistics.h:52</div></div>
<div class="ttc" id="aclasskatana_1_1PerThreadStorage_html"><div class="ttname"><a href="classkatana_1_1PerThreadStorage.html">katana::PerThreadStorage</a></div><div class="ttdef"><b>Definition:</b> PerThreadStorage.h:89</div></div>
<div class="ttc" id="aclasskatana_1_1PerThreadStorage_html_a2a764888f724f882413ff4c446100c76"><div class="ttname"><a href="classkatana_1_1PerThreadStorage.html#a2a764888f724f882413ff4c446100c76">katana::PerThreadStorage::getRemote</a></div><div class="ttdeci">T * getRemote(unsigned int thread)</div><div class="ttdef"><b>Definition:</b> PerThreadStorage.h:187</div></div>
<div class="ttc" id="aclasskatana_1_1PerThreadStorage_html_a5cad5a85aa6131cb476853d71375afce"><div class="ttname"><a href="classkatana_1_1PerThreadStorage.html#a5cad5a85aa6131cb476853d71375afce">katana::PerThreadStorage::getLocal</a></div><div class="ttdeci">T * getLocal()</div><div class="ttdef"><b>Definition:</b> PerThreadStorage.h:166</div></div>
<div class="ttc" id="aclasskatana_1_1PerThreadTimer_html"><div class="ttname"><a href="classkatana_1_1PerThreadTimer.html">katana::PerThreadTimer&lt; MORE_STATS &gt;</a></div></div>
<div class="ttc" id="aclasskatana_1_1PerThreadTimer_html_a02d6021484dfec19597f836b3ed2a833"><div class="ttname"><a href="classkatana_1_1PerThreadTimer.html#a02d6021484dfec19597f836b3ed2a833">katana::PerThreadTimer::start</a></div><div class="ttdeci">void start()</div><div class="ttdef"><b>Definition:</b> ThreadTimer.h:53</div></div>
<div class="ttc" id="aclasskatana_1_1PerThreadTimer_html_aa8841cc631de6a2e3e715de8c093ba91"><div class="ttname"><a href="classkatana_1_1PerThreadTimer.html#aa8841cc631de6a2e3e715de8c093ba91">katana::PerThreadTimer::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> ThreadTimer.h:55</div></div>
<div class="ttc" id="aclasskatana_1_1SimpleRuntimeContext_html"><div class="ttname"><a href="classkatana_1_1SimpleRuntimeContext.html">katana::SimpleRuntimeContext</a></div><div class="ttdef"><b>Definition:</b> Context.h:133</div></div>
<div class="ttc" id="aclasskatana_1_1SimpleRuntimeContext_html_a41ca6e3930216955d85cd870d7f7b668"><div class="ttname"><a href="classkatana_1_1SimpleRuntimeContext.html#a41ca6e3930216955d85cd870d7f7b668">katana::SimpleRuntimeContext::cancelIteration</a></div><div class="ttdeci">unsigned cancelIteration()</div><div class="ttdef"><b>Definition:</b> Context.cpp:85</div></div>
<div class="ttc" id="aclasskatana_1_1SimpleRuntimeContext_html_a4d715616c226c54e0338de42ad1e53e2"><div class="ttname"><a href="classkatana_1_1SimpleRuntimeContext.html#a4d715616c226c54e0338de42ad1e53e2">katana::SimpleRuntimeContext::startIteration</a></div><div class="ttdeci">void startIteration()</div><div class="ttdef"><b>Definition:</b> Context.h:173</div></div>
<div class="ttc" id="aclasskatana_1_1SimpleRuntimeContext_html_abdc2aaed6c5bf155ab981914310c416b"><div class="ttname"><a href="classkatana_1_1SimpleRuntimeContext.html#abdc2aaed6c5bf155ab981914310c416b">katana::SimpleRuntimeContext::commitIteration</a></div><div class="ttdeci">unsigned commitIteration()</div><div class="ttdef"><b>Definition:</b> Context.cpp:69</div></div>
<div class="ttc" id="aclasskatana_1_1StatTimer_html_abf7b1d592158dee50482feabe4ee5daf"><div class="ttname"><a href="classkatana_1_1StatTimer.html#abf7b1d592158dee50482feabe4ee5daf">katana::StatTimer::start</a></div><div class="ttdeci">void start()</div><div class="ttdef"><b>Definition:</b> Timer.cpp:105</div></div>
<div class="ttc" id="aclasskatana_1_1StatTimer_html_ad200173bde20a290c303d59ba6095daf"><div class="ttname"><a href="classkatana_1_1StatTimer.html#ad200173bde20a290c303d59ba6095daf">katana::StatTimer::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> Timer.cpp:111</div></div>
<div class="ttc" id="aclasskatana_1_1TerminationDetection_html"><div class="ttname"><a href="classkatana_1_1TerminationDetection.html">katana::TerminationDetection</a></div><div class="ttdoc">Termination detection is the process of determining whether multiple threads can safely stop executin...</div><div class="ttdef"><b>Definition:</b> TerminationDetection.h:70</div></div>
<div class="ttc" id="aclasskatana_1_1TerminationDetection_html_a32ffcf1eb7e49fdb9405af9a3043f7ff"><div class="ttname"><a href="classkatana_1_1TerminationDetection.html#a32ffcf1eb7e49fdb9405af9a3043f7ff">katana::TerminationDetection::Working</a></div><div class="ttdeci">bool Working() const</div><div class="ttdoc">Working returns false iff all threads should terminate.</div><div class="ttdef"><b>Definition:</b> TerminationDetection.h:108</div></div>
<div class="ttc" id="aclasskatana_1_1TerminationDetection_html_a5764c5cd3b5f81004e675c7cd03703a7"><div class="ttname"><a href="classkatana_1_1TerminationDetection.html#a5764c5cd3b5f81004e675c7cd03703a7">katana::TerminationDetection::InitializeThread</a></div><div class="ttdeci">virtual void InitializeThread()=0</div><div class="ttdoc">Initializes the per-thread state.</div></div>
<div class="ttc" id="aclasskatana_1_1TerminationDetection_html_af2dd421a8d5a90b829b0651b4d49f546"><div class="ttname"><a href="classkatana_1_1TerminationDetection.html#af2dd421a8d5a90b829b0651b4d49f546">katana::TerminationDetection::SignalWorked</a></div><div class="ttdeci">virtual void SignalWorked(bool work_happened)=0</div><div class="ttdoc">SignalWorked, when work_happened is true, indicates that since the last time this was called some pro...</div></div>
<div class="ttc" id="aclasskatana_1_1ThreadPool_html_a4a9f566c1557fe5eb5c19aea30ddf0ec"><div class="ttname"><a href="classkatana_1_1ThreadPool.html#a4a9f566c1557fe5eb5c19aea30ddf0ec">katana::ThreadPool::getLeader</a></div><div class="ttdeci">static unsigned getLeader()</div><div class="ttdef"><b>Definition:</b> ThreadPool.h:207</div></div>
<div class="ttc" id="aclasskatana_1_1ThreadPool_html_a8f4cf7ca25aa12feafd5daa204f97680"><div class="ttname"><a href="classkatana_1_1ThreadPool.html#a8f4cf7ca25aa12feafd5daa204f97680">katana::ThreadPool::run</a></div><div class="ttdeci">void run(unsigned num, Args &amp;&amp;... args)</div><div class="ttdoc">execute work on all threads a simple wrapper for run</div><div class="ttdef"><b>Definition:</b> ThreadPool.h:143</div></div>
<div class="ttc" id="aclasskatana_1_1ThreadPool_html_a9f91fd7abfc3266f838fc3516306ee9a"><div class="ttname"><a href="classkatana_1_1ThreadPool.html#a9f91fd7abfc3266f838fc3516306ee9a">katana::ThreadPool::isLeader</a></div><div class="ttdeci">static bool isLeader()</div><div class="ttdef"><b>Definition:</b> ThreadPool.h:206</div></div>
<div class="ttc" id="aclasskatana_1_1ThreadPool_html_ad2e037a424d92d0cdbadfe1892cf98df"><div class="ttname"><a href="classkatana_1_1ThreadPool.html#ad2e037a424d92d0cdbadfe1892cf98df">katana::ThreadPool::getTID</a></div><div class="ttdeci">static unsigned getTID()</div><div class="ttdef"><b>Definition:</b> ThreadPool.h:205</div></div>
<div class="ttc" id="aclasskatana_1_1ThreadPool_html_ad39effd6378fb8120f3e2a587bc5c32f"><div class="ttname"><a href="classkatana_1_1ThreadPool.html#ad39effd6378fb8120f3e2a587bc5c32f">katana::ThreadPool::getSocket</a></div><div class="ttdeci">static unsigned getSocket()</div><div class="ttdef"><b>Definition:</b> ThreadPool.h:208</div></div>
<div class="ttc" id="aclasskatana_1_1ThreadPool_html_adc41bcc0bbfbccbc8a2bd773c0bdeee0"><div class="ttname"><a href="classkatana_1_1ThreadPool.html#adc41bcc0bbfbccbc8a2bd773c0bdeee0">katana::ThreadPool::getMaxSockets</a></div><div class="ttdeci">unsigned getMaxSockets() const</div><div class="ttdef"><b>Definition:</b> ThreadPool.h:181</div></div>
<div class="ttc" id="aclasskatana_1_1UserContextAccess_html"><div class="ttname"><a href="classkatana_1_1UserContextAccess.html">katana::UserContextAccess&lt; value_type &gt;</a></div></div>
<div class="ttc" id="aclasskatana_1_1UserContextAccess_html_a4c54bfe63b9937a5b34c058b2822f1fa"><div class="ttname"><a href="classkatana_1_1UserContextAccess.html#a4c54bfe63b9937a5b34c058b2822f1fa">katana::UserContextAccess::data</a></div><div class="ttdeci">SuperTy &amp; data()</div><div class="ttdef"><b>Definition:</b> UserContextAccess.h:39</div></div>
<div class="ttc" id="aclasskatana_1_1UserContextAccess_html_a5a562d3efdd538dac4caebbb8538a7fc"><div class="ttname"><a href="classkatana_1_1UserContextAccess.html#a5a562d3efdd538dac4caebbb8538a7fc">katana::UserContextAccess::getPushBuffer</a></div><div class="ttdeci">PushBufferTy &amp; getPushBuffer()</div><div class="ttdef"><b>Definition:</b> UserContextAccess.h:37</div></div>
<div class="ttc" id="aclasskatana_1_1UserContextAccess_html_a77f15a97745f32d09d9d320b62a4b9b2"><div class="ttname"><a href="classkatana_1_1UserContextAccess.html#a77f15a97745f32d09d9d320b62a4b9b2">katana::UserContextAccess::resetAlloc</a></div><div class="ttdeci">void resetAlloc()</div><div class="ttdef"><b>Definition:</b> UserContextAccess.h:36</div></div>
<div class="ttc" id="aclasskatana_1_1UserContextAccess_html_a7bc78ba794e089b500edadd19235ce05"><div class="ttname"><a href="classkatana_1_1UserContextAccess.html#a7bc78ba794e089b500edadd19235ce05">katana::UserContextAccess::setFastPushBack</a></div><div class="ttdeci">void setFastPushBack(FastPushBack f)</div><div class="ttdef"><b>Definition:</b> UserContextAccess.h:41</div></div>
<div class="ttc" id="aclasskatana_1_1UserContextAccess_html_ab2a8f3bf4ace3ab947903b357a24decd"><div class="ttname"><a href="classkatana_1_1UserContextAccess.html#ab2a8f3bf4ace3ab947903b357a24decd">katana::UserContextAccess::resetPushBuffer</a></div><div class="ttdeci">void resetPushBuffer()</div><div class="ttdef"><b>Definition:</b> UserContextAccess.h:38</div></div>
<div class="ttc" id="aclasskatana_1_1UserContextAccess_html_afee85bdded13bc9d0fafb1a5586e60c9"><div class="ttname"><a href="classkatana_1_1UserContextAccess.html#afee85bdded13bc9d0fafb1a5586e60c9">katana::UserContextAccess::setBreakFlag</a></div><div class="ttdeci">void setBreakFlag(bool *b)</div><div class="ttdef"><b>Definition:</b> UserContextAccess.h:42</div></div>
<div class="ttc" id="aclasskatana_1_1Wrapper_html"><div class="ttname"><a href="classkatana_1_1Wrapper.html">katana::Wrapper</a></div><div class="ttdoc">Simple Container Wrapper worklist (not scalable).</div><div class="ttdef"><b>Definition:</b> Simple.h:35</div></div>
<div class="ttc" id="aclasskatana_1_1gdeque_html_ad6ba263865e4bf66d6a0927090cce81b"><div class="ttname"><a href="classkatana_1_1gdeque.html#ad6ba263865e4bf66d6a0927090cce81b">katana::gdeque::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> gdeque.h:258</div></div>
<div class="ttc" id="agIO_8h_html"><div class="ttname"><a href="gIO_8h.html">gIO.h</a></div></div>
<div class="ttc" id="anamespacekatana_html"><div class="ttname"><a href="namespacekatana.html">katana</a></div><div class="ttdoc">Construct a PropertyGraph in memory.</div><div class="ttdef"><b>Definition:</b> Allocators.h:43</div></div>
<div class="ttc" id="anamespacekatana_html_a07cdf1268c8feb6ae8c3a2ecd81e7a92"><div class="ttname"><a href="namespacekatana.html#a07cdf1268c8feb6ae8c3a2ecd81e7a92">katana::for_each_gen</a></div><div class="ttdeci">void for_each_gen(const RangeTy &amp;r, FunctionTy &amp;&amp;fn, const TupleTy &amp;tpl)</div><div class="ttdoc">Normalize arguments to for_each.</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:469</div></div>
<div class="ttc" id="anamespacekatana_html_a1beaf8c96891b65f684741e6923db0d4"><div class="ttname"><a href="namespacekatana.html#a1beaf8c96891b65f684741e6923db0d4">katana::execFrame</a></div><div class="ttdeci">thread_local std::jmp_buf execFrame</div><div class="ttdef"><b>Definition:</b> Context.cpp:30</div></div>
<div class="ttc" id="anamespacekatana_html_a442cf800869fdedc926894feecc5df21"><div class="ttname"><a href="namespacekatana.html#a442cf800869fdedc926894feecc5df21">katana::has_with_iterator</a></div><div class="ttdeci">constexpr auto has_with_iterator(int) -&gt; decltype(std::declval&lt; typename WLTy::template with_iterator&lt; int * &gt;::type &gt;(), bool())</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:418</div></div>
<div class="ttc" id="anamespacekatana_html_a55c2e6fc71d4a95b2a467e038d125e5e"><div class="ttname"><a href="namespacekatana.html#a55c2e6fc71d4a95b2a467e038d125e5e">katana::get_default_trait_values</a></div><div class="ttdeci">constexpr auto get_default_trait_values([[maybe_unused]] std::index_sequence&lt;&gt; seq, [[maybe_unused]] S source, [[maybe_unused]] T tags, [[maybe_unused]] D defaults)</div><div class="ttdoc">Returns a tuple that has an element from defaults[i] for every type from tags[i] missing in source.</div><div class="ttdef"><b>Definition:</b> Traits.h:153</div></div>
<div class="ttc" id="anamespacekatana_html_a7456f5718807adfd1dafa96512a3bf5f"><div class="ttname"><a href="namespacekatana.html#a7456f5718807adfd1dafa96512a3bf5f">katana::OperatorReferenceType</a></div><div class="ttdeci">typename internal::OperatorReferenceType_impl&lt; T &gt;::type OperatorReferenceType</div><div class="ttdef"><b>Definition:</b> OperatorReferenceTypes.h:65</div></div>
<div class="ttc" id="anamespacekatana_html_a7d27f1df6ceb0d7194a24a576f173de5"><div class="ttname"><a href="namespacekatana.html#a7d27f1df6ceb0d7194a24a576f173de5">katana::get_trait_value</a></div><div class="ttdeci">constexpr auto get_trait_value(Tuple tpl)</div><div class="ttdoc">Returns the value associated with the given trait T in a tuple.</div><div class="ttdef"><b>Definition:</b> Traits.h:118</div></div>
<div class="ttc" id="anamespacekatana_html_a7f1bb8b9db99383005c03685212ceeac"><div class="ttname"><a href="namespacekatana.html#a7f1bb8b9db99383005c03685212ceeac">katana::for_each_impl</a></div><div class="ttdeci">void for_each_impl(const RangeTy &amp;range, FunctionTy &amp;&amp;fn, const ArgsTy &amp;args)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:443</div></div>
<div class="ttc" id="anamespacekatana_html_a8e917129a0649c5fece62dca21858a41"><div class="ttname"><a href="namespacekatana.html#a8e917129a0649c5fece62dca21858a41">katana::GetThreadPool</a></div><div class="ttdeci">KATANA_EXPORT ThreadPool &amp; GetThreadPool()</div><div class="ttdoc">return a reference to system thread pool</div><div class="ttdef"><b>Definition:</b> ThreadPool.cpp:289</div></div>
<div class="ttc" id="anamespacekatana_html_aad4ffca2ccdc1c54f45f94808aac9306"><div class="ttname"><a href="namespacekatana.html#aad4ffca2ccdc1c54f45f94808aac9306">katana::setThreadContext</a></div><div class="ttdeci">KATANA_EXPORT void setThreadContext(SimpleRuntimeContext *n)</div><div class="ttdoc">used by the parallel code to set up conflict detection per thread</div><div class="ttdef"><b>Definition:</b> Context.cpp:33</div></div>
<div class="ttc" id="anamespacekatana_html_ab473e662b3aed5db12ebd185fca76f11"><div class="ttname"><a href="namespacekatana.html#ab473e662b3aed5db12ebd185fca76f11">katana::GetBarrier</a></div><div class="ttdeci">KATANA_EXPORT Barrier &amp; GetBarrier(unsigned active_threads)</div><div class="ttdoc">Return a reference to system barrier.</div><div class="ttdef"><b>Definition:</b> Barrier.cpp:45</div></div>
<div class="ttc" id="anamespacekatana_html_abe87e3fefa44cdaf3f6d806d46167ceb"><div class="ttname"><a href="namespacekatana.html#abe87e3fefa44cdaf3f6d806d46167ceb">katana::ConflictFlag</a></div><div class="ttdeci">ConflictFlag</div><div class="ttdef"><b>Definition:</b> Context.h:40</div></div>
<div class="ttc" id="anamespacekatana_html_acdd775f6f963127a8d60f0480545c28b"><div class="ttname"><a href="namespacekatana.html#acdd775f6f963127a8d60f0480545c28b">katana::GetTerminationDetection</a></div><div class="ttdeci">KATANA_EXPORT TerminationDetection &amp; GetTerminationDetection(unsigned active_threads)</div><div class="ttdef"><b>Definition:</b> Termination.cpp:37</div></div>
<div class="ttc" id="anamespacekatana_html_afea83498ac35d84218d622ef40b4aa41"><div class="ttname"><a href="namespacekatana.html#afea83498ac35d84218d622ef40b4aa41">katana::activeThreads</a></div><div class="ttdeci">unsigned activeThreads</div><div class="ttdef"><b>Definition:</b> Chunk.h:32</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1RunQueueState_html"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html">katana::ForEachExecutor::RunQueueState</a></div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:177</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1RunQueueState_html_a358815138640087a104657a46f02f4ee"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a358815138640087a104657a46f02f4ee">katana::ForEachExecutor::RunQueueState::item</a></div><div class="ttdeci">std::optional&lt; typename WL::value_type &gt; item</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:179</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1RunQueueState_html_a4b4888e24ebe35fda714e436d9393917"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1RunQueueState.html#a4b4888e24ebe35fda714e436d9393917">katana::ForEachExecutor::RunQueueState::num</a></div><div class="ttdeci">unsigned int num</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:178</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1T1_html"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1T1.html">katana::ForEachExecutor::T1</a></div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:356</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1T2_html"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1T2.html">katana::ForEachExecutor::T2</a></div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:357</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1ThreadLocalBasics_html"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html">katana::ForEachExecutor::ThreadLocalBasics</a></div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:159</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1ThreadLocalBasics_html_a364f3bd1b24e058330f0281763917f9c"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a364f3bd1b24e058330f0281763917f9c">katana::ForEachExecutor::ThreadLocalBasics::ThreadLocalBasics</a></div><div class="ttdeci">ThreadLocalBasics(FunctionTy fn)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:164</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1ThreadLocalBasics_html_a4585c683ac1172d3ca13bb003c521277"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a4585c683ac1172d3ca13bb003c521277">katana::ForEachExecutor::ThreadLocalBasics::facing</a></div><div class="ttdeci">UserContextAccess&lt; value_type &gt; facing</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:160</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1ThreadLocalBasics_html_a90325fb3c764a02010dbe3a538b30dbb"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a90325fb3c764a02010dbe3a538b30dbb">katana::ForEachExecutor::ThreadLocalBasics::function</a></div><div class="ttdeci">FunctionTy function</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:161</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1ThreadLocalBasics_html_a9593e081b649ce2b3967145b8a50c9aa"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1ThreadLocalBasics.html#a9593e081b649ce2b3967145b8a50c9aa">katana::ForEachExecutor::ThreadLocalBasics::ctx</a></div><div class="ttdeci">SimpleRuntimeContext ctx</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:162</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1ThreadLocalData_html"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html">katana::ForEachExecutor::ThreadLocalData</a></div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:169</div></div>
<div class="ttc" id="astructkatana_1_1ForEachExecutor_1_1ThreadLocalData_html_a17da128a502794de58175462f82e485f"><div class="ttname"><a href="structkatana_1_1ForEachExecutor_1_1ThreadLocalData.html#a17da128a502794de58175462f82e485f">katana::ForEachExecutor::ThreadLocalData::ThreadLocalData</a></div><div class="ttdeci">ThreadLocalData(FunctionTy fn, const char *ln)</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:170</div></div>
<div class="ttc" id="astructkatana_1_1function__traits_html_ae6f1117f10d28783d87d1fd7856dd873"><div class="ttname"><a href="structkatana_1_1function__traits.html#ae6f1117f10d28783d87d1fd7856dd873">katana::function_traits::type</a></div><div class="ttdeci">std::tuple type</div><div class="ttdef"><b>Definition:</b> Traits.h:196</div></div>
<div class="ttc" id="astructkatana_1_1loopname_html"><div class="ttname"><a href="structkatana_1_1loopname.html">katana::loopname</a></div><div class="ttdef"><b>Definition:</b> Traits.h:211</div></div>
<div class="ttc" id="astructkatana_1_1reiterator_3_01WLTy_00_01IterTy_00_01typename_01std_1_1enable__if_3_01has__with_4074605c49f6ca5bb8f58c9b75e7199d_html_a985524badbef461236ee9bbff26859ca"><div class="ttname"><a href="structkatana_1_1reiterator_3_01WLTy_00_01IterTy_00_01typename_01std_1_1enable__if_3_01has__with_4074605c49f6ca5bb8f58c9b75e7199d.html#a985524badbef461236ee9bbff26859ca">katana::reiterator&lt; WLTy, IterTy, typename std::enable_if&lt; has_with_iterator&lt; WLTy &gt;(0)&gt;::type &gt;::type</a></div><div class="ttdeci">WLTy::template with_iterator&lt; IterTy &gt;::type type</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:437</div></div>
<div class="ttc" id="astructkatana_1_1reiterator_html"><div class="ttname"><a href="structkatana_1_1reiterator.html">katana::reiterator</a></div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:430</div></div>
<div class="ttc" id="astructkatana_1_1reiterator_html_a7cf8caadf6a38597d847bde3a641c75b"><div class="ttname"><a href="structkatana_1_1reiterator.html#a7cf8caadf6a38597d847bde3a641c75b">katana::reiterator::type</a></div><div class="ttdeci">WLTy type</div><div class="ttdef"><b>Definition:</b> Executor_ForEach.h:431</div></div>
<div class="ttc" id="astructkatana_1_1trait__type_html"><div class="ttname"><a href="structkatana_1_1trait__type.html">katana::trait_type</a></div><div class="ttdoc">Returns the type associated with the given trait in a tuple.</div><div class="ttdef"><b>Definition:</b> Traits.h:127</div></div>
<div class="ttc" id="astructkatana_1_1wl__tag_html"><div class="ttname"><a href="structkatana_1_1wl__tag.html">katana::wl_tag</a></div><div class="ttdoc">Indicates worklist to use.</div><div class="ttdef"><b>Definition:</b> Traits.h:225</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8e37b9d33140d6009518b7a0bb5633b7.html">work</a></li><li class="navelem"><a class="el" href="dir_3a4858b562c0a88ac395be0a5441d7fc.html">katana</a></li><li class="navelem"><a class="el" href="dir_9c9d0acd61a69abefb88ac349e722f3d.html">katana</a></li><li class="navelem"><a class="el" href="dir_2b1998863781283459da697b9f9cdd84.html">libgalois</a></li><li class="navelem"><a class="el" href="dir_bc4cead32625711696c623802a7502ec.html">include</a></li><li class="navelem"><a class="el" href="dir_217d22d7990016938ab45d1aa87f618f.html">katana</a></li><li class="navelem"><a class="el" href="Executor__ForEach_8h.html">Executor_ForEach.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
